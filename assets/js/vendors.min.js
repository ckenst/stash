!function(t,i){"use strict";function n(t){this.callback=t,this.ticking=!1}function e(i){return i&&"undefined"!=typeof t&&(i===t||i.nodeType)}function o(t){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var i,n,s=t||{};for(n=1;n<arguments.length;n++){var l=arguments[n]||{};for(i in l)s[i]="object"!=typeof s[i]||e(s[i])?s[i]||l[i]:o(s[i],l[i])}return s}function s(t){return t===Object(t)?t:{down:t,up:t}}function l(t,i){i=o(i,l.options),this.lastKnownScrollY=0,this.elem=t,this.debouncer=new n(this.update.bind(this)),this.tolerance=s(i.tolerance),this.classes=i.classes,this.offset=i.offset,this.scroller=i.scroller,this.initialised=!1,this.onPin=i.onPin,this.onUnpin=i.onUnpin,this.onTop=i.onTop,this.onNotTop=i.onNotTop}var r={bind:!!function(){}.bind,classList:"classList"in i.documentElement,rAF:!!(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame)};t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,n.prototype={constructor:n,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},l.prototype={constructor:l,init:function(){return l.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var t=this.classes;this.initialised=!1,this.elem.classList.remove(t.unpinned,t.pinned,t.top,t.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,i=this.classes;(t.contains(i.pinned)||!t.contains(i.unpinned))&&(t.add(i.unpinned),t.remove(i.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,i=this.classes;t.contains(i.unpinned)&&(t.remove(i.unpinned),t.add(i.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,i=this.classes;t.contains(i.top)||(t.add(i.top),t.remove(i.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,i=this.classes;t.contains(i.notTop)||(t.add(i.notTop),t.remove(i.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(i.documentElement||i.body.parentNode||i.body).scrollTop},getViewportHeight:function(){return t.innerHeight||i.documentElement.clientHeight||i.body.clientHeight},getDocumentHeight:function(){var t=i.body,n=i.documentElement;return Math.max(t.scrollHeight,n.scrollHeight,t.offsetHeight,n.offsetHeight,t.clientHeight,n.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===t||this.scroller===i.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var i=0>t,n=t+this.getViewportHeight()>this.getScrollerHeight();return i||n},toleranceExceeded:function(t,i){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[i]},shouldUnpin:function(t,i){var n=t>this.lastKnownScrollY,e=t>=this.offset;return n&&e&&i},shouldPin:function(t,i){var n=t<this.lastKnownScrollY,e=t<=this.offset;return n&&i||e},update:function(){var t=this.getScrollY(),i=t>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(t,i);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),this.shouldUnpin(t,n)?this.unpin():this.shouldPin(t,n)&&this.pin(),this.lastKnownScrollY=t)}},l.options={tolerance:{up:0,down:0},offset:0,scroller:t,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},l.cutsTheMustard="undefined"!=typeof r&&r.rAF&&r.bind&&r.classList,t.Headroom=l}(window,document),!function(t){t&&(t.fn.headroom=function(i){return this.each(function(){var n=t(this),e=n.data("headroom"),o="object"==typeof i&&i;o=t.extend(!0,{},Headroom.options,o),e||(e=new Headroom(this,o),e.init(),n.data("headroom",e)),"string"==typeof i&&e[i]()})},t("[data-headroom]").each(function(){var i=t(this);i.headroom(i.data())}))}(window.Zepto||window.jQuery),jQuery(document).ready(function(t){t(".like").stop().click(function(){var i=t(this).attr("rel"),n={data:i,action:"stash_likes_callback"};t.ajax({action:"stash_likes_callback",type:"GET",dataType:"json",url:ajaxurl,data:n,success:function(n){1==n.status?(t(".like[rel="+i+"]").addClass("liked"),t(".like[rel="+i+"] span").html(n.likes)):(t(".like[rel="+i+"]").removeClass("liked"),t(".like[rel="+i+"] span").html(n.likes))}})})});